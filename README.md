# s21_decimal

Проект в школе 21.
Библиотека на C, имитирующая класс Decimal из C#.

Кратко о сути проекта.

Структура, используемая для имитации работы Decimal:

```
typedef struct 
{
    unsigned int bits[4];
} s21_decimal;
```

Структура состоит 4 unsigned int.

- 0-2 элементы - хранят само число (мантиссу)
- 3 элемент - информативный int:
    - 31ый бит хранит знак (0 - положительное число, 1 - отрицательное)
    - с 16 по 23ый бит хранят информацию о степени деления на 10. Максимальное значение - 28 (т.е. максимум хранятся
      значения с точностью 28 знаков после запятой)
    - остальные биты занулеваны

Реализованные функции:

| Имя функции в проекте     | Имитирует                     | Описание                                                          |                                                                    
|---------------------------|-------------------------------|-------------------------------------------------------------------|
| s21_add                   | +                             | Сложение                                                          |                                                                      
| s21_sub                   | -                             | Вычичание                                                         |                                                                     
| s21_mul                   | *                             | Умножение                                                         |                                                                    
| s21_div                   | /                             | Деление                                                           |                                                                  
| s21_is_less               | <                             | Меньше                                                            |
| s21_is_less_or_equal      | <=                            | Меньше или равно                                                  | 
| s21_is_greater            | \>                            | Больше                                                            |
| s21_is_greater_or_equal   | \>=                           | Больше или равно                                                  | 
| s21_is_equal              | ==                            | Равно                                                             |
| s21_is_not_equal          | !=                            | Не равно                                                          |
| s21_from_int_to_decimal   | Convert.ToDecimal(int val)    | Конвертация из int в decimal                                      |
| s21_from_float_to_decimal | Convert.ToDecimal(float val)  | Конвертация из float в decimal                                    |
| s21_from_decimal_to_int   | Convert.ToInt32(decimal val)  | Конвертация из decimal в int                                      |
| s21_from_decimal_to_float | Convert.ToSingle(decimal val) | Конвертация из decimal в float                                    |
| s21_floor                 | Decimal.Floor()               | Округление в сторону отрицательной бесконечности                  |
| s21_round                 | Decimal.Round()               | Округление (прим. в C# - банковское, по заданию - математическое) |
| s21_truncate              | Decimal.Truncate()            | Отбрасываются незначащие нули после запятой                       |
| s21_negate                | Decimal.Negate()              | Результат умножения на -1                                         |

Возращаемые значения для арифметических операций:

- 0 - Все хорошо
- 1 - Число слишком большое или равно положительной бесконечности
- 2 - Число слишком маленькое или равно отрицательной бесконечности
- 3 - Деление на 0

Возращаемые значения для операций сравнения:

- 0 - FALSE
- 1 - TRUE

Возращаемые значения для всех остальных функций:

- 0 - Все хорошо
- 1 - Ошибка

Как запустить c тестами:
```
make build
make test
```

Как запустить с отчетом покрываемости тестов:
```
make build
make gcov_report
```
Для пересобирки используется цель ```make rebuild```